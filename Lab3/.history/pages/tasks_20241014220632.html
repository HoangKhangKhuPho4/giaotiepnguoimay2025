<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tasks - FuturLearn</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoY9YH3kQ2kQ4gldnR8h29iqbG7ZmF6AZhU+IhIYOa4jS1s" crossorigin="anonymous">

  <!-- Font Awesome CDN cho các biểu tượng -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-p1AgNkju5mG1Gcprtw1bA53Qak9vW2ONL+Z0iXvZHRER2p8e/1GqWBQcmxN24c5hk+OYqTFG7t4L4T3zUUMh4w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Custom CSS -->
  <style>
    /* Tổng quát */
    body {
      background-color: #f4f6f9;
      font-family: 'Roboto', sans-serif;
    }

    /* Header và Navigation (Không được thay đổi) */
    header {
      background-color: #343a40;
      padding: 20px 0;
    }

    header .logo {
      color: #ffffff;
      font-size: 2rem;
      font-weight: bold;
      margin-left: 20px;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
    }

    nav a {
      color: #ffffff;
      font-size: 1.1rem;
      padding: 8px 15px;
      border-radius: 20px;
      transition: background-color 0.3s, color 0.3s;
      text-decoration: none;
    }

    nav a:hover {
      background-color: #495057;
      color: #ffc107;
    }

    nav a.active {
      background-color: #495057;
      color: #ffc107;
      font-weight: bold;
    }

    .separator {
      height: 2px;
      background-color: #495057;
      margin-top: 10px;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
    }

    /* Main Content */
    main {
      padding: 60px 0;
    }

    .container {
      max-width: 800px;
      background-color: #ffffff;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .container h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #343a40;
      font-weight: 700;
    }

    /* Form Thêm Nhiệm Vụ */
    .task-form {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
    }

    .task-form input[type="text"] {
      flex: 1;
      padding: 15px;
      border: 2px solid #28a745;
      border-radius: 50px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }

    .task-form input[type="text"]:focus {
      border-color: #218838;
      outline: none;
      box-shadow: 0 0 5px rgba(40, 167, 69, 0.5);
    }

    /* Nút Thêm Nhiệm Vụ */
    .add-task {
      padding: 15px 20px;
      background-color: #28a745;
      border: none;
      color: #ffffff;
      font-size: 1rem;
      border-radius: 50px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.3s;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .add-task:hover {
      background-color: #218838;
      transform: scale(1.05);
    }

    .add-task:focus {
      outline: none;
    }

    /* Tìm Kiếm Nhiệm Vụ */
    #searchInput {
      width: 100%;
      padding: 12px 20px;
      margin-bottom: 20px;
      border: 2px solid #ced4da;
      border-radius: 25px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }

    #searchInput:focus {
      border-color: #28a745;
      outline: none;
      box-shadow: 0 0 5px rgba(40, 167, 69, 0.5);
    }

    /* Danh Sách Nhiệm Vụ */
    #list_item {
      list-style: none;
      padding: 0;
    }

    #list_item li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #f8f9fa;
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 15px;
      transition: background-color 0.3s, transform 0.3s;
      position: relative;
    }

    #list_item li:hover {
      background-color: #e9ecef;
      transform: scale(1.01);
    }

    #list_item li.completed {
      text-decoration: line-through;
      background-color: #d4edda;
      color: #155724;
    }

    /* Checkbox Nhiệm Vụ */
    .task-checkbox {
      margin-right: 15px;
      width: 20px;
      height: 20px;
      cursor: pointer;
    }

    /* Văn Bản Nhiệm Vụ */
    .task-text {
      flex: 1;
      font-size: 1rem;
      color: #343a40;
      margin-right: 15px;
    }

    .task-text.editing {
      border-bottom: 2px solid #28a745;
    }

    /* Nút Chỉnh Sửa và Xóa Nhiệm Vụ */
    .edit-task,
    .delete-task {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      color: #343a40;
      transition: color 0.3s;
      margin-left: 10px;
    }

    .edit-task:hover {
      color: #ffc107;
    }

    .delete-task:hover {
      color: #dc3545;
    }

    /* Responsive */
    @media (max-width: 576px) {
      .task-form {
        flex-direction: column;
      }

      .add-task {
        width: 100%;
        justify-content: center;
      }

      #list_item li {
        flex-direction: column;
        align-items: flex-start;
      }

      .task-text {
        margin-bottom: 10px;
      }

      .edit-task,
      .delete-task {
        margin-left: 0;
        margin-right: 10px;
      }
    }

    /* Animation cho Nhiệm Vụ */
    .task-item-enter {
      opacity: 0;
      transform: translateY(-20px);
    }

    .task-item-enter-active {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.3s, transform 0.3s;
    }

    .task-item-exit {
      opacity: 1;
      transform: translateY(0);
    }

    .task-item-exit-active {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s, transform 0.3s;
    }

    /* Custom CSS từ bạn */
    #list1 .form-control {
      border-color: transparent;
    }

    #list1 .form-control:focus {
      border-color: transparent;
      box-shadow: none;
    }

    #list1 .select-input.form-control[readonly]:not([disabled]) {
      background-color: #fbfbfb;
    }
  </style>
</head>

<body>
  <!-- Header (Không được thay đổi) -->
  <header>
    <h1 class='logo'>FuturLearn</h1>
    <nav>
      <a href="../pages/home.html">Home</a>
      <a href="../pages/courses.html"> All Courses</a>
      <a href="../pages/tasks.html" class="active">To-Do</a>
      <a href="../pages/account.html">My Account</a>
      <a href="../index.html">Log out</a>
    </nav>
    <div class="separator"></div>
  </header>

  <!-- Main Content -->
  <main>
    <div class="container">
      <h2>Task Manager</h2>
      <form class="task-form">
        <input type="text" placeholder="Nhập nhiệm vụ của bạn..." id="box" required />
        <button type="button" class="add-task" onclick="add_item()">
          <i class="fas fa-plus"></i> Thêm
        </button>
      </form>
      <input type="text" id="searchInput" class="form-control" placeholder="Tìm kiếm nhiệm vụ..." onkeyup="filterTasks()">
      <ul id="list_item">
        <!-- Nhiệm vụ sẽ được thêm vào đây -->
      </ul>
    </div>
  </main>

  <!-- Footer (Không được thay đổi) -->
  <footer>
    <p class="p1"> Happy Learning with FuturLearn </p>
    <p class="p2"> Make a part of your journey with us. Enroll now ! </p>
    <hr>
    <p class="p3"><small>&copy; 2024 FuturLearn. All rights reserved.</small></p>
  </footer>

  <!-- Bootstrap 5 JS và dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoY9YH3kQ2kQ4gldnR8h29iqbG7ZmF6AZhU+IhIYOa4jS1s"
    crossorigin="anonymous"></script>

  <!-- Font Awesome JS (Nếu cần) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"
    integrity="sha512-tQy1CMrCfe0s+qlWgJ2PJoYw1WQm1iVfPkShL8Kr4mCvtM5+8VRVUJEEeaz+edWJZr2QBrMqFbqO26UZsJRshA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- Custom JavaScript -->
  <script>
    // Đảm bảo rằng mã JavaScript sẽ chạy sau khi DOM đã tải hoàn chỉnh
    document.addEventListener('DOMContentLoaded', (event) => {
      loadTasks();
    });

    // Thêm nhiệm vụ mới
    function add_item() {
      const taskInput = document.getElementById('box');
      const taskText = taskInput.value.trim();
      if (taskText === "") {
        alert("Vui lòng nhập nhiệm vụ của bạn.");
        return;
      }

      const taskList = document.getElementById('list_item');

      // Tạo phần tử li mới
      const li = document.createElement('li');
      li.className = 'task-item d-flex align-items-center justify-content-between';

      // Tạo checkbox để đánh dấu hoàn thành
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.className = 'form-check-input task-checkbox me-3';
      checkbox.onclick = function () {
        if (this.checked) {
          li.classList.add('completed');
        } else {
          li.classList.remove('completed');
        }
        saveTasks();
      };

      // Tạo span để hiển thị nhiệm vụ
      const span = document.createElement('span');
      span.className = 'task-text flex-grow-1';
      span.textContent = taskText;

      // Tạo nút chỉnh sửa
      const editBtn = document.createElement('button');
      editBtn.className = 'edit-task btn btn-sm btn-outline-secondary me-2';
      editBtn.innerHTML = '<i class="fas fa-edit"></i>';
      editBtn.onclick = function () {
        editTask(span);
      };

      // Tạo nút xóa
      const deleteBtn = document.createElement('button');
      deleteBtn.className = 'delete-task btn btn-sm btn-outline-danger';
      deleteBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
      deleteBtn.onclick = function () {
        if (confirm("Bạn có chắc chắn muốn xóa nhiệm vụ này?")) {
          li.remove();
          saveTasks();
        }
      };

      // Thêm các phần tử vào li
      li.appendChild(checkbox);
      li.appendChild(span);
      li.appendChild(editBtn);
      li.appendChild(deleteBtn);

      // Thêm li vào danh sách
      taskList.appendChild(li);

      // Làm sạch input
      taskInput.value = "";

      // Lưu danh sách nhiệm vụ
      saveTasks();
    }

    // Chỉnh sửa nhiệm vụ
    function editTask(span) {
      const currentText = span.textContent;
      const newText = prompt("Chỉnh sửa nhiệm vụ:", currentText);
      if (newText !== null) {
        span.textContent = newText.trim() !== "" ? newText.trim() : currentText;
        saveTasks();
      }
    }

    // Lưu nhiệm vụ vào localStorage
    function saveTasks() {
      const tasks = [];
      const listItems = document.querySelectorAll('#list_item li');
      listItems.forEach(item => {
        const task = {
          text: item.querySelector('.task-text').textContent,
          completed: item.querySelector('.task-checkbox').checked
        };
        tasks.push(task);
      });
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    // Tải nhiệm vụ từ localStorage
    function loadTasks() {
      const tasks = JSON.parse(localStorage.getItem('tasks'));
      if (tasks) {
        tasks.forEach(task => {
          const taskList = document.getElementById('list_item');

          // Tạo phần tử li mới
          const li = document.createElement('li');
          li.className = 'task-item d-flex align-items-center justify-content-between';
          if (task.completed) {
            li.classList.add('completed');
          }

          // Tạo checkbox để đánh dấu hoàn thành
          const checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.className = 'form-check-input task-checkbox me-3';
          checkbox.checked = task.completed;
          checkbox.onclick = function () {
            if (this.checked) {
              li.classList.add('completed');
            } else {
              li.classList.remove('completed');
            }
            saveTasks();
          };

          // Tạo span để hiển thị nhiệm vụ
          const span = document.createElement('span');
          span.className = 'task-text flex-grow-1';
          span.textContent = task.text;

          // Tạo nút chỉnh sửa
          const editBtn = document.createElement('button');
          editBtn.className = 'edit-task btn btn-sm btn-outline-secondary me-2';
          editBtn.innerHTML = '<i class="fas fa-edit"></i>';
          editBtn.onclick = function () {
            editTask(span);
          };

          // Tạo nút xóa
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'delete-task btn btn-sm btn-outline-danger';
          deleteBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
          deleteBtn.onclick = function () {
            if (confirm("Bạn có chắc chắn muốn xóa nhiệm vụ này?")) {
              li.remove();
              saveTasks();
            }
          };

          // Thêm các phần tử vào li
          li.appendChild(checkbox);
          li.appendChild(span);
          li.appendChild(editBtn);
          li.appendChild(deleteBtn);

          // Thêm li vào danh sách
          taskList.appendChild(li);
        });
      }
    }

    // Tìm kiếm nhiệm vụ
    function filterTasks() {
      const input = document.getElementById('searchInput');
      const filter = input.value.toLowerCase();
      const list = document.getElementById('list_item');
      const items = list.getElementsByTagName('li');

      Array.from(items).forEach(function (item) {
        const text = item.querySelector('.task-text').textContent.toLowerCase();
        if (text.includes(filter)) {
          item.style.display = "";
        } else {
          item.style.display = "none";
        }
      });
    }
  </script>
</body>

</html>
