<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code Ninjas Discussions - Web Tech</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Custom CSS -->
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f4f6f9;
        transition: background-color 0.3s, color 0.3s;
      }
      /* Dark Mode */
      body.dark-mode {
        background-color: #121212;
        color: #e0e0e0;
      }
      .content {
        padding: 30px 0;
      }
      .post {
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        padding: 20px;
        transition: transform 0.2s, background-color 0.3s, color 0.3s;
      }
      body.dark-mode .post {
        background-color: #1e1e1e;
        color: #e0e0e0;
        box-shadow: 0 2px 5px rgba(255, 255, 255, 0.1);
      }
      .post:hover {
        transform: translateY(-5px);
      }
      .post .icon {
        color: #17a2b8;
        margin-right: 10px;
        font-size: 1.2rem;
      }
      body.dark-mode .post .icon {
        color: #1abc9c;
      }
      .post-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #343a40;
        transition: color 0.3s;
      }
      body.dark-mode .post-title {
        color: #e0e0e0;
      }
      .post-time {
        font-size: 0.875rem;
        color: #6c757d;
        margin-top: 10px;
      }
      body.dark-mode .post-time {
        color: #a0a0a0;
      }
      .post-content a {
        color: #17a2b8;
        text-decoration: none;
        transition: color 0.3s;
      }
      .post-content a:hover {
        text-decoration: underline;
        color: #138496;
      }
      .sidebar {
        background-color: #ffffff;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s, color 0.3s;
      }
      body.dark-mode .sidebar {
        background-color: #1e1e1e;
        color: #e0e0e0;
        box-shadow: 0 2px 5px rgba(255, 255, 255, 0.1);
      }
      .sidebar img {
        width: 100%;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      .sidebar .btn {
        width: 100%;
        margin-bottom: 10px;
      }
      /* Toggle Switch */
      .toggle-switch {
        display: flex;
        align-items: center;
      }
      .toggle-switch input {
        margin-left: 10px;
      }
      /* Comments Section */
      .comments {
        margin-top: 20px;
      }
      .comment {
        padding: 10px;
        border-left: 3px solid #17a2b8;
        margin-bottom: 10px;
        background-color: #f8f9fa;
        border-radius: 5px;
        transition: background-color 0.3s, border-left-color 0.3s;
      }
      body.dark-mode .comment {
        background-color: #2c2c2c;
        border-left-color: #1abc9c;
      }
      .comment .comment-author {
        font-weight: 600;
      }
      /* Animations */
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      /* Responsive Adjustments */
      @media (max-width: 992px) {
        .sidebar {
          margin-top: 20px;
        }
      }
      /* Hiệu ứng Gõ Máy Tính cho .Description */
      .Description {
        overflow: hidden; /* Ẩn phần văn bản tràn */
        border-right: 0.15em solid var(--accent-color); /* Con trỏ gõ máy tính */
        white-space: nowrap; /* Không xuống dòng */
        margin: 0 auto; /* Canh giữa */
        letter-spacing: 0.15em; /* Khoảng cách giữa các chữ */
        animation: typing 6s steps(40, end) infinite,
          /* Hiệu ứng đánh máy với thời gian 6s và lặp lại */ blink-caret 0.75s
            step-end infinite; /* Con trỏ nhấp nháy */
      }

      @keyframes typing {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }

      @keyframes blink-caret {
        from,
        to {
          border-color: transparent;
        }
        50% {
          border-color: var(--accent-color);
        }
      }
    </style>
  </head>
  <body>
    <!-- Nội Dung Chính -->
    <div class="container content">
      <div class="row">
        <!-- Bài Đăng -->
        <div class="col-lg-8">
          <!-- Ví dụ về một bài đăng -->
          <div class="post fade-in">
            <div class="d-flex align-items-center mb-2">
              <i class="fas fa-exclamation-circle icon"></i>
              <span class="post-title"
                >Tham gia <a href="#">Contest Biweekly Contest 148</a></span
              >
            </div>
            <div class="post-time">2 ngày trước</div>
            <div class="post-content">
              Hãy tham gia <a href="#">Contest Biweekly Contest 148</a> để thử
              thách kỹ năng của bạn và nhận thưởng hấp dẫn!
            </div>
            <!-- Tương Tác Bài Đăng -->
            <div class="mt-3 d-flex justify-content-between">
              <div>
                <button class="btn btn-sm btn-outline-primary like-btn">
                  <i class="fas fa-thumbs-up"></i>
                  <span class="like-count">0</span>
                </button>
                <button class="btn btn-sm btn-outline-danger dislike-btn">
                  <i class="fas fa-thumbs-down"></i>
                  <span class="dislike-count">0</span>
                </button>
              </div>
              <div>
                <button
                  class="btn btn-sm btn-outline-secondary share-btn"
                  data-bs-toggle="modal"
                  data-bs-target="#shareModal"
                  data-post-title="Contest Biweekly Contest 148"
                  data-post-url="#"
                >
                  <i class="fas fa-share"></i> Chia sẻ
                </button>
              </div>
            </div>
            <!-- Phần Bình Luận -->
            <div class="comments">
              <h5>Bình luận</h5>
              <div class="comment">
                <span class="comment-author">User123:</span> Tôi đã tham gia và
                rất hài lòng với thử thách lần này!
              </div>
              <div class="comment">
                <span class="comment-author">CoderX:</span> Contest này thật sự
                rất thú vị, hy vọng sẽ còn nhiều hơn nữa.
              </div>
              <!-- Form Thêm Bình Luận -->
              <form class="comment-form">
                <div class="mb-3">
                  <textarea
                    class="form-control"
                    rows="2"
                    placeholder="Viết bình luận..."
                    required
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-sm">
                  Đăng Bình Luận
                </button>
              </form>
            </div>
          </div>
          <!-- Thêm các bài đăng tương tự -->
          <!-- Bạn có thể lặp lại khối .post cho các bài đăng khác -->
          <div class="post fade-in">
            <div class="d-flex align-items-center mb-2">
              <i class="fas fa-user icon"></i>
              <span class="post-title"
                >An anonymous user posted
                <a href="#">Massive Layoff !!!!!</a></span
              >
            </div>
            <div class="post-time">3 ngày trước</div>
            <div class="post-content">
              Well, nhiều bạn có thể đã đọc:
              <a href="#">Meta Interview Experience</a>. Đây là cập nhật kịp
              thời cho mọi người. Hôm nay lúc 9 giờ sáng, tôi đã nhận được thông
              báo...
            </div>
            <!-- Tương Tác Bài Đăng -->
            <div class="mt-3 d-flex justify-content-between">
              <div>
                <button class="btn btn-sm btn-outline-primary like-btn">
                  <i class="fas fa-thumbs-up"></i>
                  <span class="like-count">0</span>
                </button>
                <button class="btn btn-sm btn-outline-danger dislike-btn">
                  <i class="fas fa-thumbs-down"></i>
                  <span class="dislike-count">0</span>
                </button>
              </div>
              <div>
                <button
                  class="btn btn-sm btn-outline-secondary share-btn"
                  data-bs-toggle="modal"
                  data-bs-target="#shareModal"
                  data-post-title="Massive Layoff !!!!!"
                  data-post-url="#"
                >
                  <i class="fas fa-share"></i> Chia sẻ
                </button>
              </div>
            </div>
            <!-- Phần Bình Luận -->
            <div class="comments">
              <h5>Bình luận</h5>
              <div class="comment">
                <span class="comment-author">TechGuru:</span> Thật không may khi
                nghe về những đợt sa thải như vậy. Mong mọi người sẽ ổn.
              </div>
              <div class="comment">
                <span class="comment-author">DevMaster:</span> Tôi đã gặp chuyện
                tương tự ở công ty khác. Chúng ta hãy hỗ trợ nhau nhé!
              </div>
              <!-- Form Thêm Bình Luận -->
              <form class="comment-form">
                <div class="mb-3">
                  <textarea
                    class="form-control"
                    rows="2"
                    placeholder="Viết bình luận..."
                    required
                  ></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-sm">
                  Đăng Bình Luận
                </button>
              </form>
            </div>
          </div>
          <!-- Bạn có thể tiếp tục thêm các bài đăng khác ở đây -->
        </div>

        <!-- Thanh Bên (Sidebar) -->
        <div class="col-lg-4">
          <div class="sidebar">
            <img
              src="https://via.placeholder.com/350x150"
              alt="Quảng cáo"
              class="img-fluid"
            />
            <button
              class="btn btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#createPostModal"
            >
              <i class="fas fa-plus"></i> Tạo Bài Đăng Mới
            </button>
            <button class="btn btn-secondary">
              <i class="fas fa-tags"></i> Thẻ
            </button>
            <hr />
            <h5 class="sidebar-title">Top Contributors</h5>
            <ul class="list-unstyled">
              <li><i class="fas fa-user"></i> User123</li>
              <li><i class="fas fa-user"></i> CoderX</li>
              <li><i class="fas fa-user"></i> DevMaster</li>
              <li><i class="fas fa-user"></i> TechGuru</li>
            </ul>
            <hr />
            <h5 class="sidebar-title">Trending Tags</h5>
            <div class="d-flex flex-wrap">
              <span class="badge bg-primary m-1">#Algorithms</span>
              <span class="badge bg-success m-1">#DataStructures</span>
              <span class="badge bg-warning text-dark m-1">#Database</span>
              <span class="badge bg-danger m-1">#Frontend</span>
              <span class="badge bg-info text-dark m-1">#Backend</span>
              <span class="badge bg-secondary m-1">#DevOps</span>
              <span class="badge bg-dark m-1">#MachineLearning</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Chia Sẻ -->
    <div
      class="modal fade"
      id="shareModal"
      tabindex="-1"
      aria-labelledby="shareModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="shareModalLabel">Chia Sẻ Bài Đăng</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Đóng"
            ></button>
          </div>
          <div class="modal-body">
            <p>Chia sẻ bài đăng này lên mạng xã hội:</p>
            <a
              href="#"
              class="btn btn-primary me-2 share-facebook"
              target="_blank"
              ><i class="fab fa-facebook-f"></i> Facebook</a
            >
            <a href="#" class="btn btn-info me-2 share-twitter" target="_blank"
              ><i class="fab fa-twitter"></i> Twitter</a
            >
            <a
              href="#"
              class="btn btn-primary me-2 share-linkedin-in"
              style="background-color: #0077b5"
              target="_blank"
              ><i class="fab fa-linkedin-in"></i> LinkedIn</a
            >
            <a href="#" class="btn btn-dark share-github" target="_blank"
              ><i class="fab fa-github"></i> GitHub</a
            >
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Tạo Bài Đăng Mới -->
    <div
      class="modal fade"
      id="createPostModal"
      tabindex="-1"
      aria-labelledby="createPostModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="createPostModalLabel">
              Tạo Bài Đăng Mới
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Đóng"
            ></button>
          </div>
          <div class="modal-body">
            <form id="createPostForm">
              <div class="mb-3">
                <label for="postTitle" class="form-label">Tiêu Đề</label>
                <input
                  type="text"
                  class="form-control"
                  id="postTitle"
                  placeholder="Nhập tiêu đề bài đăng"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="postContent" class="form-label">Nội Dung</label>
                <textarea
                  class="form-control"
                  id="postContent"
                  rows="5"
                  placeholder="Nhập nội dung bài đăng"
                  required
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="postTags" class="form-label">Thẻ (Tags)</label>
                <input
                  type="text"
                  class="form-control"
                  id="postTags"
                  placeholder="Nhập các thẻ, phân cách bằng dấu phẩy"
                />
              </div>
              <button type="submit" class="btn btn-primary">Đăng Bài</button>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts Bootstrap và Custom JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Dark Mode Toggle
        const toggleSwitch = document.getElementById("darkModeToggle");
        const currentTheme = localStorage.getItem("theme");

        if (currentTheme === "dark") {
          document.body.classList.add("dark-mode");
          if (toggleSwitch) toggleSwitch.checked = true;
        }

        if (toggleSwitch) {
          toggleSwitch.addEventListener("change", () => {
            if (toggleSwitch.checked) {
              document.body.classList.add("dark-mode");
              localStorage.setItem("theme", "dark");
            } else {
              document.body.classList.remove("dark-mode");
              localStorage.setItem("theme", "light");
            }
          });
        }

        // Like/Dislike Functionality
        const updateLikeDislike = (btn, countElement) => {
          btn.addEventListener("click", () => {
            let count = parseInt(countElement.textContent);
            countElement.textContent = count + 1;
          });
        };

        const initializeLikeDislike = () => {
          const posts = document.querySelectorAll(".post");
          posts.forEach((post) => {
            const likeBtn = post.querySelector(".like-btn");
            const dislikeBtn = post.querySelector(".dislike-btn");
            const likeCount = post.querySelector(".like-count");
            const dislikeCount = post.querySelector(".dislike-count");

            if (likeBtn && likeCount) {
              updateLikeDislike(likeBtn, likeCount);
            }

            if (dislikeBtn && dislikeCount) {
              updateLikeDislike(dislikeBtn, dislikeCount);
            }
          });
        };

        initializeLikeDislike();

        // Comment Submission
        const initializeComments = () => {
          const commentForms = document.querySelectorAll(".comment-form");
          commentForms.forEach((form) => {
            form.addEventListener("submit", (e) => {
              e.preventDefault();
              const textarea = form.querySelector("textarea");
              const commentText = textarea.value.trim();
              if (commentText !== "") {
                const commentsSection = form.parentElement;
                const newComment = document.createElement("div");
                newComment.classList.add("comment", "fade-in");
                newComment.innerHTML = `<span class="comment-author">Bạn:</span> ${commentText}`;
                commentsSection.insertBefore(newComment, form);
                textarea.value = "";
              }
            });
          });
        };

        initializeComments();

        // Share Modal Logic
        const shareModal = document.getElementById("shareModal");
        if (shareModal) {
          shareModal.addEventListener("show.bs.modal", function (event) {
            const button = event.relatedTarget;
            const postTitle = button.getAttribute("data-post-title");
            const postUrl = button.getAttribute("data-post-url");

            // Update modal content
            const modalTitle = shareModal.querySelector(".modal-title");
            modalTitle.textContent = `Chia Sẻ Bài Đăng: ${postTitle}`;

            // Update share links
            const facebookLink = shareModal.querySelector(".share-facebook");
            const twitterLink = shareModal.querySelector(".share-twitter");
            const linkedinLink = shareModal.querySelector(".share-linkedin-in");
            const githubLink = shareModal.querySelector(".share-github");

            facebookLink.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(
              postUrl
            )}&t=${encodeURIComponent(postTitle)}`;
            twitterLink.href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(
              postUrl
            )}&text=${encodeURIComponent(postTitle)}`;
            linkedinLink.href = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(
              postUrl
            )}&title=${encodeURIComponent(postTitle)}`;
            githubLink.href = `https://github.com/search?q=${encodeURIComponent(
              postTitle
            )}`;
          });
        }

        // Create Post Submission
        const createPostForm = document.getElementById("createPostForm");
        if (createPostForm) {
          createPostForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const title = document.getElementById("postTitle").value.trim();
            const content = document.getElementById("postContent").value.trim();
            const tags = document.getElementById("postTags").value.trim();

            if (title !== "" && content !== "") {
              // Create a new post element
              const postContainer = document.querySelector(".col-lg-8");
              const newPost = document.createElement("div");
              newPost.classList.add("post", "fade-in");
              newPost.innerHTML = `
                <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-user icon"></i>
                    <span class="post-title">Bạn đã đăng <a href="#">${title}</a></span>
                </div>
                <div class="post-time">Vừa mới đăng</div>
                <div class="post-content">
                    ${content}
                </div>
                <!-- Tương Tác Bài Đăng -->
                <div class="mt-3 d-flex justify-content-between">
                    <div>
                        <button class="btn btn-sm btn-outline-primary like-btn"><i class="fas fa-thumbs-up"></i> <span class="like-count">0</span></button>
                        <button class="btn btn-sm btn-outline-danger dislike-btn"><i class="fas fa-thumbs-down"></i> <span class="dislike-count">0</span></button>
                    </div>
                    <div>
                        <button class="btn btn-sm btn-outline-secondary share-btn" data-bs-toggle="modal" data-bs-target="#shareModal" data-post-title="${title}" data-post-url="#"> <i class="fas fa-share"></i> Chia sẻ</button>
                    </div>
                </div>
                <!-- Phần Bình Luận -->
                <div class="comments">
                    <h5>Bình luận</h5>
                    <!-- Có thể thêm bình luận mặc định hoặc để trống -->
                    <form class="comment-form">
                        <div class="mb-3">
                            <textarea class="form-control" rows="2" placeholder="Viết bình luận..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-sm">Đăng Bình Luận</button>
                    </form>
                </div>
              `;
              postContainer.prepend(newPost);

              // Reset form và đóng modal
              createPostForm.reset();
              const createPostModal = bootstrap.Modal.getInstance(
                document.getElementById("createPostModal")
              );
              createPostModal.hide();

              // Thêm sự kiện cho các nút mới
              const likeBtn = newPost.querySelector(".like-btn");
              const dislikeBtn = newPost.querySelector(".dislike-btn");
              const likeCount = newPost.querySelector(".like-count");
              const dislikeCount = newPost.querySelector(".dislike-count");

              if (likeBtn && likeCount) {
                updateLikeDislike(likeBtn, likeCount);
              }

              if (dislikeBtn && dislikeCount) {
                updateLikeDislike(dislikeBtn, dislikeCount);
              }

              const commentForm = newPost.querySelector(".comment-form");
              if (commentForm) {
                commentForm.addEventListener("submit", (e) => {
                  e.preventDefault();
                  const textarea = commentForm.querySelector("textarea");
                  const commentText = textarea.value.trim();
                  if (commentText !== "") {
                    const commentsSection = commentForm.parentElement;
                    const newComment = document.createElement("div");
                    newComment.classList.add("comment", "fade-in");
                    newComment.innerHTML = `<span class="comment-author">Bạn:</span> ${commentText}`;
                    commentsSection.insertBefore(newComment, form);
                    textarea.value = "";
                  }
                });
              }

              // Share Modal sẽ tự động được xử lý bởi sự kiện show.bs.modal
            }
          });
        }

        // Search Functionality (Demo: Show alert with query)
        const searchForm = document.getElementById("searchForm");
        if (searchForm) {
          searchForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const query = document.getElementById("searchInput").value.trim();
            if (query !== "") {
              alert(`Bạn đã tìm kiếm: "${query}"`);
              // Here, you can integrate actual search functionality with backend
              searchForm.reset();
            }
          });
        }
      });
    </script>
  </body>
</html>
